 This documentation will explain the functionality of the script, the setup, and how to use it.

---


This Python script fetches, processes, and visualizes Power Spectral Density (PSD) data for a given date. The script downloads a `.mat` file from a remote GitHub repository, extracts the PSD data, and generates an average noise spectrum plot based on the retrieved data.

## Prerequisites



You can install the required dependencies by running the following command:

```
pip install httpx pydantic matplotlib numpy scipy
```

## Script Overview

### Key Functions:

1. **`convert_to_date()`**
   Prompts the user to enter a starting date in the format `DDMMYYYY`. 



2. **`url_maker(result: datetime) -> str`**
   Generates the URL for the `.mat` file for the specified date. This URL points to the raw content of the PSD file hosted on GitHub.


3. **`test_url()`**
   The main function that:

   * Prompts the user to input a date.

   * Constructs the corresponding URL for the `.mat` file using `url_maker()`.

   * Fetches the file from the URL using `httpx.get()`.

   * Saves the file locally.

   * Calls `load_data()` to load the `.mat` file and plot the PSD data.

 

4. **`load_data(filename: str, date_formatted: str)`**
   Loads the PSD data from the `.mat` file and plots the average PSD spectrum.

   * A plot showing the average PSD across all 24 hours of the day.

   * The data is loaded using `scipy.io.loadmat()`.

   * The average PSD is calculated using `np.nanmean()`.

   * A log-scaled plot of the average PSD is generated using `matplotlib`.

   After plotting, the temporary file is deleted.

### Workflow

1. **User Input**: The user is prompted to input a starting date in the format `DDMMYYYY`.
2. **File Download**: The script constructs the URL for the corresponding `.mat` file, fetches it from GitHub using `httpx`, and saves it locally.
3. **Data Loading and Plotting**: The script loads the data from the `.mat` file, computes the average PSD, and generates a plot of the noise spectrum.
4. **Clean-Up**: After plotting, the temporary `.mat` file is deleted.

### Example Usage

1. Run the script:

   ```bash
   python script_name.py
   ```

2. You will be prompted to enter a starting date (in the format `DDMMYYYY`). For example:

   ```
   Enter the starting date (format-DDMMYYYY): 01012019
   ```

3. The script will then attempt to download the corresponding `.mat` file from the GitHub repository and display the average noise spectrum plot.

### Plot Description

The plot generated by the script shows the **average Power Spectral Density (PSD)** over the 24 hours of the day. The frequency axis is logarithmic, and the PSD is displayed in dB (re 1 µPa²/Hz). This provides an overview of the noise spectrum for the given day.


Additionally, a plot will be displayed showing the average PSD for the specified date.

## Notes

* The script currently supports only files hosted on the specified GitHub repository.
* The date input format must strictly follow `DDMMYYYY` (e.g., `01012019` for January 1, 2019).
* The script automatically deletes the temporary `.mat` file after processing to save disk space.

